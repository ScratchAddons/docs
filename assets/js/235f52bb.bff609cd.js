"use strict";(self.webpackChunkdocusaurus_2_classic_template=self.webpackChunkdocusaurus_2_classic_template||[]).push([[8398],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var l=n(7294);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,l,d=function(e,t){if(null==e)return{};var n,l,d={},a=Object.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(d[n]=e[n]);return d}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(d[n]=e[n])}return d}var o=l.createContext({}),s=function(e){var t=l.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=s(e.components);return l.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},k=l.forwardRef((function(e,t){var n=e.components,d=e.mdxType,a=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=s(n),k=d,f=u["".concat(o,".").concat(k)]||u[k]||c[k]||a;return n?l.createElement(f,r(r({ref:t},p),{},{components:n})):l.createElement(f,r({ref:t},p))}));function f(e,t){var n=arguments,d=t&&t.mdxType;if("string"==typeof e||d){var a=n.length,r=new Array(a);r[0]=k;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[u]="string"==typeof e?e:d,r[1]=i;for(var s=2;s<a;s++)r[s]=n[s];return l.createElement.apply(null,r)}return l.createElement.apply(null,n)}k.displayName="MDXCreateElement"},5828:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>s});var l=n(7462),d=(n(7294),n(3905));const a={title:"addon.self",h1_title:"`addon.self`",description:"Allows addons to get information about themselves or the browser.",weight:1},r=void 0,i={unversionedId:"reference/addon-api/addon.self",id:"reference/addon-api/addon.self",title:"addon.self",description:"Allows addons to get information about themselves or the browser.",source:"@site/develop/reference/addon-api/addon.self.md",sourceDirName:"reference/addon-api",slug:"/reference/addon-api/addon.self",permalink:"/develop/reference/addon-api/addon.self",draft:!1,tags:[],version:"current",frontMatter:{title:"addon.self",h1_title:"`addon.self`",description:"Allows addons to get information about themselves or the browser.",weight:1},sidebar:"tutorialSidebar",previous:{title:"addon.popup",permalink:"/develop/reference/addon-api/addon.popup"},next:{title:"addon.settings",permalink:"/develop/reference/addon-api/addon.settings"}},o={},s=[{value:"Description",id:"description",level:2},{value:"Examples",id:"examples",level:2},{value:"Using <code>addon.self.dir</code>",id:"using-addonselfdir",level:3},{value:"Using <code>addon.self.disabled</code> and events (<code>dynamicDisable</code>)",id:"using-addonselfdisabled-and-events-dynamicdisable",level:3},{value:"Properties",id:"properties",level:2},{value:"<code>addon.self.id</code>",id:"addonselfid",level:3},{value:"<code>addon.self.dir</code>",id:"addonselfdir",level:3},{value:"<code>addon.self.lib</code>",id:"addonselflib",level:3},{value:"<code>addon.self.browser</code>",id:"addonselfbrowser",level:3},{value:"<code>addon.self.disabled</code>",id:"addonselfdisabled",level:3},{value:"<code>addon.self.enabledLate</code>",id:"addonselfenabledlate",level:3},{value:"Methods",id:"methods",level:2},{value:"<code>getEnabledAddons</code>",id:"getenabledaddons",level:3},{value:"Events",id:"events",level:2},{value:"<code>disabled</code>",id:"disabled",level:3},{value:"<code>reenabled</code>",id:"reenabled",level:3}],p={toc:s};function u(e){let{components:t,...n}=e;return(0,d.kt)("wrapper",(0,l.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,d.kt)("table",null,(0,d.kt)("thead",{parentName:"table"},(0,d.kt)("tr",{parentName:"thead"},(0,d.kt)("th",{parentName:"tr",align:null}),(0,d.kt)("th",{parentName:"tr",align:null}))),(0,d.kt)("tbody",{parentName:"table"},(0,d.kt)("tr",{parentName:"tbody"},(0,d.kt)("td",{parentName:"tr",align:null},"Available in userscripts"),(0,d.kt)("td",{parentName:"tr",align:null},"\u2714\ufe0f")),(0,d.kt)("tr",{parentName:"tbody"},(0,d.kt)("td",{parentName:"tr",align:null},"Available in popup scripts"),(0,d.kt)("td",{parentName:"tr",align:null},"\u2714\ufe0f")),(0,d.kt)("tr",{parentName:"tbody"},(0,d.kt)("td",{parentName:"tr",align:null},"Required manifest permissions"),(0,d.kt)("td",{parentName:"tr",align:null},"None")))),(0,d.kt)("h2",{id:"description"},"Description"),(0,d.kt)("p",null,"Allows addons to get information about themselves or the browser."),(0,d.kt)("h2",{id:"examples"},"Examples"),(0,d.kt)("h3",{id:"using-addonselfdir"},"Using ",(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.dir")),(0,d.kt)("p",null,"With ",(0,d.kt)("inlineCode",{parentName:"p"},"addon.self.dir"),", we can get the URL to an image inside the addon's directory."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-js"},'const img = document.createElement("img");\nimg.src = addon.self.dir + "/image.svg";\n// Will be something like `chrome-extension://aeepldbjfoihffgcaejikpoeppffnlbd/addons/addon-id/image.svg`\ndocument.body.appendChild(img);\n')),(0,d.kt)("h3",{id:"using-addonselfdisabled-and-events-dynamicdisable"},"Using ",(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.disabled")," and events (",(0,d.kt)("inlineCode",{parentName:"h3"},"dynamicDisable"),")"),(0,d.kt)("p",null,"We use the ",(0,d.kt)("inlineCode",{parentName:"p"},"disabled")," and ",(0,d.kt)("inlineCode",{parentName:"p"},"reenabled")," events to hide the image when the addon is disabled, without\nrequiring the user to refresh the page.",(0,d.kt)("br",{parentName:"p"}),"\n","We also use ",(0,d.kt)("inlineCode",{parentName:"p"},"addon.self.disabled")," inside an event listener to avoid running code while the addon is disabled.",(0,d.kt)("br",{parentName:"p"}),"\n","This example requires ",(0,d.kt)("inlineCode",{parentName:"p"},'{"dynamicDisable": true}')," in the manifest."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-js"},'addon.self.addEventListener(\n  "disabled",\n  () => (img.style.visibility = "visible")\n);\naddon.self.addEventListener(\n  "reenabled",\n  () => (img.style.visibility = "hidden")\n);\n\nimg.onclick = () => {\n  if (addon.self.disabled) return;\n  // Code starting here will only run if the image is visible\n};\n')),(0,d.kt)("h2",{id:"properties"},"Properties"),(0,d.kt)("h3",{id:"addonselfid"},(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.id")),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("td",null,"Type"),(0,d.kt)("td",null,(0,d.kt)("code",null,"String"))),(0,d.kt)("tr",null,(0,d.kt)("td",null,"Nullable"),(0,d.kt)("td",null,"No"))),(0,d.kt)("p",null,"The addon ID for this addon.",(0,d.kt)("br",{parentName:"p"}),"\n","The addon ID is the name of the directory inside ",(0,d.kt)("inlineCode",{parentName:"p"},"/addons")," that identifies the addon."),(0,d.kt)("h3",{id:"addonselfdir"},(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.dir")),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("td",null,"Type"),(0,d.kt)("td",null,(0,d.kt)("code",null,"String"))),(0,d.kt)("tr",null,(0,d.kt)("td",null,"Nullable"),(0,d.kt)("td",null,"No"))),(0,d.kt)("p",null,"Path to the addon's directory, without trailing slash.",(0,d.kt)("br",{parentName:"p"}),"\n","Should be used instead of hardcoding URLs. Locally, using a hardcoded URL like ",(0,d.kt)("inlineCode",{parentName:"p"},"chrome-extension://aeepldbjfoihffgcaejikpoeppffnlbd/addons/full-signature/happen.js")," might appear to work properly, but the extension ID can change and it will not work in Firefox."),(0,d.kt)("h3",{id:"addonselflib"},(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.lib")),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("td",null,"Type"),(0,d.kt)("td",null,(0,d.kt)("code",null,"String"))),(0,d.kt)("tr",null,(0,d.kt)("td",null,"Nullable"),(0,d.kt)("td",null,"No"))),(0,d.kt)("p",null,"Path to the ",(0,d.kt)("inlineCode",{parentName:"p"},"/libraries")," directory, without trailing slash."),(0,d.kt)("h3",{id:"addonselfbrowser"},(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.browser")),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("td",null,"Value"),(0,d.kt)("td",null,(0,d.kt)("code",null,'"chrome" | "firefox"'))),(0,d.kt)("tr",null,(0,d.kt)("td",null,"Nullable"),(0,d.kt)("td",null,"No"))),(0,d.kt)("p",null,"The browser Scratch Addons is running on."),(0,d.kt)("h3",{id:"addonselfdisabled"},(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.disabled")),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("td",null,"Type"),(0,d.kt)("td",null,(0,d.kt)("code",null,"Boolean"))),(0,d.kt)("tr",null,(0,d.kt)("td",null,"Nullable"),(0,d.kt)("td",null,"No"))),(0,d.kt)("p",null,"Whether the addon is currently disabled or not.",(0,d.kt)("br",{parentName:"p"}),"\n","Useful for returning early in event listeners for addons that support ",(0,d.kt)("inlineCode",{parentName:"p"},"dynamicDisable"),"."),(0,d.kt)("h3",{id:"addonselfenabledlate"},(0,d.kt)("inlineCode",{parentName:"h3"},"addon.self.enabledLate")),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("td",null,"Type"),(0,d.kt)("td",null,(0,d.kt)("code",null,"Boolean"))),(0,d.kt)("tr",null,(0,d.kt)("td",null,"Nullable"),(0,d.kt)("td",null,"No"))),(0,d.kt)("p",null,"Whether the running userscript was injected dynamically in response to the user enabling the addon.",(0,d.kt)("br",{parentName:"p"}),"\n","Can only be ",(0,d.kt)("inlineCode",{parentName:"p"},"true")," if the addon supports dynamicEnable.",(0,d.kt)("br",{parentName:"p"}),"\n","If the addon was enabled when the page loaded, then was disabled and reenabled, this will still be ",(0,d.kt)("inlineCode",{parentName:"p"},"false"),".\nIn that case, the ",(0,d.kt)("inlineCode",{parentName:"p"},"reenabled")," event will fire."),(0,d.kt)("h2",{id:"methods"},"Methods"),(0,d.kt)("h3",{id:"getenabledaddons"},(0,d.kt)("inlineCode",{parentName:"h3"},"getEnabledAddons")),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("th",null,"Parameter"),(0,d.kt)("th",null,"Type"),(0,d.kt)("th",null,"Required"),(0,d.kt)("th",null,"Description")),(0,d.kt)("tr",null,(0,d.kt)("td",null,"tag"),(0,d.kt)("td",null,(0,d.kt)("code",null,"String")),(0,d.kt)("td",null,"No"),(0,d.kt)("td",null,"The tag for filtering."))),(0,d.kt)("table",null,(0,d.kt)("tr",null,(0,d.kt)("td",null,"Return value"),(0,d.kt)("td",null,(0,d.kt)("code",null,"Promise<string[]>")))),(0,d.kt)("p",null,"Gets a list of addon IDs enabled, optionally filtered using a ",(0,d.kt)("a",{parentName:"p",href:"https://scratchaddons.com/develop/reference/addon-manifest/#tags"},"tag"),"."),(0,d.kt)("h2",{id:"events"},"Events"),(0,d.kt)("h3",{id:"disabled"},(0,d.kt)("inlineCode",{parentName:"h3"},"disabled")),(0,d.kt)("p",null,"Fires when the addon gets disabled.",(0,d.kt)("br",{parentName:"p"}),"\n","Requires the ",(0,d.kt)("inlineCode",{parentName:"p"},"dynamicDisable")," manifest property."),(0,d.kt)("h3",{id:"reenabled"},(0,d.kt)("inlineCode",{parentName:"h3"},"reenabled")),(0,d.kt)("p",null,"Fires when the addon gets reenabled, after being disabled."))}u.isMDXComponent=!0}}]);